<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add JobPost - R2H</title>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="./css/addJobPost.css">
</head>

<body>

  <header class="head">
    <div class="resume2hire-text my-5">
      <img src="img/r2hlogo.png" alt="" srcset="" class="img-logo">
    </div>

    <div class="hamburger">
      <img src="img/hamburger.png" alt="menu">
    </div>


    <nav class="nav-bar">
      <ul class="list-unstyled ">
        <li class="">
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/resumeBuilder" class="text-decoration-none">Resume Builder</a>
        </li>
        <li>
          <a href="/screening" class="text-decoration-none">Screening</a>
        </li>
        <li>
          <a href="/hiring" class="active text-decoration-none">Hiring</a>
        </li>
        <li>
          <a href="/readJobPost/all" class="text-decoration-none">Jobs</a>
        </li>
        <li>
          <a href="/#profile-cards" class="text-decoration-none">About Us</a>
        </li>
      </ul>
    </nav>
  </header>

  <div class="job-form">
    <div class="main-div-job">
      <form>
        <h2 class="job-heading">
          POST JOB
        </h2>
        <div class="form-group row">
          <label for="companyName" class="col-sm-2 col-form-label form-label">Company Name:</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="companyName" name="companyName" placeholder="company-name"
              required>
          </div>
        </div>

        <div class="form-group row">
          <label for="jobTitle" class="col-sm-2 col-form-label form-label">Job Title:</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="jobTitle" name="jobTitle" placeholder="job-title" required>
          </div>
        </div>

        <div class="form-group row">
          <div class="col col-sm-6">
            <label for="jobId" class="col-sm-2 col-form-label form-label">JobId:</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="jobId" name="jobId" placeholder="job-id" required>
            </div>
          </div>

          <div class="col col-sm-6">
            <label for="jobLocation" class="form-label col-form-label">JobLocation:</label>
            <input type="text" id="jobLocation" name="jobLocation" class="form-control" placeholder="jobLocation"
              required>
          </div>
        </div>



        <div class="form-group">
          <label for="companyLogo" class="form-label col-form-label">Company Logo:</label>
          <input type="file" class="form-control-file" id="companyLogo" name="companyLogo" required>
        </div>


        <div class="double">
          <div class="form-group row">
            <div class="col col-sm-6">
              <label for="jobType" class="form-label col-form-label">JobType:</label>
              <div class="col-sm-8">
                <select id="jobType" name="jobType" class="form-control" required>
                  <option value="">Job Type</option>
                  <option value="Full-Time">Full-Time</option>
                  <option value="Part-Time">Part-Time</option>
                  <option value="Internship">Internship</option>
                  <option value="Contract">Contract</option>
                  <option value="Temporary">Temporary</option>
                  <option value="Volunteer">Volunteer</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <div class="col col-sm-6">
              <label for="jobFunction" class="form-label col-form-label">JobFunction:</label>
              <div class="col-sm-8">
                <select id="jobFunction" name="jobFunction" class="form-control" required>
                  <option value="">Job Function</option>
                  <option value="Information Technology">Information Technology</option>
                  <option value="Consulting">Consulting</option>
                  <option value="Design">Design</option>
                  <option value="Marketing">Marketing</option>
                  <option value="Art/Creative">Art/Creative</option>
                  <option value="Research">Research</option>
                  <option value="Quality Assurance">Quality Assurance</option>
                  <option value="Business Development">Business Development</option>
                  <option value="Analyst">Analyst</option>
                  <option value="Sales">Sales</option>
                  <option value="Engineering">Engineering</option>
                  <option value="Other">Other</option>

                </select>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <div class="col col-sm-6">
              <label for="jobMode" class="form-label col-form-label">JobMode:</label>
              <div class="col-sm-8">
                <select id="jobMode" name="jobMode" class="form-control" required>
                  <option value="">Job Mode</option>
                  <option value="On-site">On-site</option>
                  <option value="Remote">Remote</option>
                  <option value="Hybrid">Hybrid</option>
                </select>
              </div>
            </div>

            <div class=" form-group col col-sm-6">
              <label for="salary" class="form-label col-form-label">Salary:</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="salary" name="salary" placeholder="salary" required>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <div class="form-group col col-sm-6">
              <label for="experienceLevel" class="form-label col-form-label">Experience Level:</label>
              <div class="col-sm-8">
                <select id="experienceLevel" name="experienceLevel" class="form-control" required>
                  <option value="">Experience Level</option>
                  <option value="Internship">Internship</option>
                  <option value="Entry Level">Entry Level</option>
                  <option value="Associate">Associate</option>
                  <option value="Mid-Senior Level">Mid-Senior Level</option>
                  <option value="Director">Director</option>
                  <option value="Executive">Executive</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <div class="col col-sm-6">
              <label for="yearOfExperience" class="col-form-label form-label">Year(s) of Experience:</label>
              <div class="col-sm-8">
                <input type="number" class="form-control" id="yearOfExperience" name="yearOfExperience"
                  placeholder="Ex- 1,2,3.." required>
              </div>
            </div>

          </div>
        </div>


        <div class="form-group">
          <label for="skillsRequired" class="col-sm-2 col-form-label form-label">Skills: </label>
          <textarea class="form-control" id="skillsRequired" name="skillsRequired" rows="3" required></textarea>
        </div>


        <div class="form-group row">
          <label for="emailHR" class="col-sm-2 col-form-label form-label">Email HR:</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="emailHR" name="emailHR" placeholder="hr-email" required>
          </div>
        </div>

        <div class="form-group row">
          <label for="hiringLink" class="col-sm-2 col-form-label form-label">Hiring Link:</label>
          <div class="col-sm-10">
            <input type="url" pattern="http(s)?://.*" class="form-control" id="hiringLink" name="hiringLink" placeholder="hiring-link"
              required>
          </div>
        </div>

        <div class="form-group">
          <label for="jobDescription" class="col-sm-2 col-form-label form-label">Job Descrption:</label>
          <textarea class="form-control" id="jobDescription" name="jobDescription" rows="3" required></textarea>
        </div>

        <div class="form-group row">
          <div class="col-sm-10 button-post">
            <button type="submit" class="btn btn-primary">Post Job</button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <footer>
    <div class="container">
      <div class="foot">
        <p>Copyright &#169; Resume2Hire</p>
      </div>
    </div>
  </footer>
</body>

<script>
  const form = document.querySelector("form");
  const companyLogo = document.getElementById("companyLogo");
  companyLogo.addEventListener("change", async function () {
    if (companyLogo.files[0].size > 2000000) {
      Swal.fire({
        icon: 'error',
        title: 'Oops...',
        text: 'Image size should be less than 2MB!',
      });
      companyLogo.value = "";
    }
    else {
      var formData = new FormData();
      formData.append("companyLogo", companyLogo.files[0]);
      try {
        const response = await fetch('/uploadCompanyLogo', {
          method: "POST",
          body: formData
        });
        const data = await response.json();
        localStorage.setItem("companyLogoUrl", data.imageUrl);
        Swal.fire("Image uploaded successfully");
      } catch (error) {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: error,
        });
      }
    }
  });
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const jobTitle = document.getElementById("jobTitle").value;
    const jobId = document.getElementById("jobId").value;
    const companyName = document.getElementById("companyName").value;
    const jobType = document.getElementById("jobType").value;
    const jobFunction = document.getElementById("jobFunction").value;
    const jobLocation = document.getElementById("jobLocation").value;
    const jobMode = document.getElementById("jobMode").value;
    const salary = document.getElementById("salary").value;
    const experienceLevel = document.getElementById("experienceLevel").value;
    const yearOfExperience = document.getElementById("yearOfExperience").value;
    const skillsRequired = document.getElementById("skillsRequired").value;
    const emailHR = document.getElementById("emailHR").value;
    const hiringLink = document.getElementById("hiringLink").value;
    const jobDescription = document.getElementById("jobDescription").value;
    const companyLogoUrl = localStorage.getItem("companyLogoUrl");
    try {
      const res = await fetch('/addJobPost', {
        method: 'POST',
        body: JSON.stringify({
          jobTitle,
          jobId,
          companyName,
          companyLogoUrl,
          jobType,
          jobFunction,
          jobLocation,
          jobMode,
          salary,
          experienceLevel,
          yearOfExperience,
          skillsRequired,
          emailHR,
          hiringLink,
          jobDescription
        }),
        headers: { 'Content-Type': 'application/json' }
      });
      const data = await res.json();
      if (data.error) {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: data.error,
        });
      }
      if (data) {
        Swal.fire({ position: 'top', icon: 'success', title: 'Job Posted Successfully', showConfirmButton: false, timer: 2500 })
        form.reset();
      }
    } catch (error) {
      Swal.fire({
        icon: 'error',
        title: 'Oops...',
        text: error,
      });
    }
  });

</script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</html>